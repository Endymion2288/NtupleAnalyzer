# ==============================================================================
# jjp_mc.sub - HTCondor submit file for JJP MC analysis
# ==============================================================================
# Submit various JJP MC modes: DPS, TPS
#
# Usage:
#   condor_submit jjp_mc.sub                    # Submit DPS (default)
#   condor_submit jjp_mc.sub MODE=TPS           # Submit TPS mode
#   condor_submit jjp_mc.sub MODE=ALL           # Submit all modes
# ==============================================================================

# Job configuration
universe = vanilla
executable = ./run_wrapper.sh

# Default parameters (can be overridden)
MODE = DPS
JOBS = 8
MAX_EVENTS = -1
MUON_ID = soft

# Arguments passed to run_wrapper.sh
arguments = "run_jjp_mc_ntuple.sh -m $(MODE) -j $(JOBS) -n $(MAX_EVENTS) --muon-id $(MUON_ID)"

# Log files
log_dir = logs/jjp_mc
output = $(log_dir)/jjp_mc_$(MODE)_$(Cluster)_$(Process).out
error = $(log_dir)/jjp_mc_$(MODE)_$(Cluster)_$(Process).err
log = $(log_dir)/jjp_mc_$(MODE)_$(Cluster)_$(Process).log

# Resource requests
request_memory = 48000
request_cpus = $(JOBS)
request_disk = 10G

# Job flavor (max runtime)
+JobFlavour = "workday"

# File transfer settings
should_transfer_files = YES
when_to_transfer_output = ON_EXIT
transfer_output_files = output

# Environment and proxy
getenv = True
use_x509userproxy = True
x509userproxy = /afs/cern.ch/user/x/xcheng/x509up_u180107

# Notification
notification = Error
notify_user = xcheng@cern.ch

# Requirements
requirements = (OpSysAndVer =?= "AlmaLinux9")

# Queue
queue
